<h2>Welcome to the Recreational Information Db Search Tool</h2>
v0.2.03  <br/>


<div layout="row">
  <div flex="33">
    <md-input-container>
      <div layout="row" layout-align="start center" class="search-input">
        <md-select ng-model="search.state" ng-change="searchRecareas()" placeholder="Select State">
          <md-option ng-repeat="state in searchTables.usStates" value="{{state.abbreviation}}">{{state.name}}</md-option>
        </md-select>
      </div>
    </md-input-container>

    <md-input-container ng-show="recareas">
      <div layout="row" layout-align="start center" layout-wrap class="search-input">
        <md-select ng-model="search.recAreaID" ng-change="searchFacilities()" placeholder="Select Rec Area">
          <md-option ng-repeat="recarea in recareas" value="{{recarea.RecAreaID}}">{{recarea.RecAreaName}} ({{recarea.FACILITY.length}})</md-option>
        </md-select>
        <span ng-show="search.recAreaID" ng-click="searchRecareas()" class="search-reset"><a href="#">reset</a></span>
      </div>
    </md-input-container>

    <form ng-submit="searchQuery()">
      <md-input-container ng-show="recareas" layout="column">
        <input type="text" ng-model="search.query" name="text">
        <input type="submit" id="submit" value="Submit" />
      </md-input-container>
    </form>

    <md-content layout-padding  ng-show="recareas">

       <md-grid-list
            md-cols-sm="1" md-cols-md="4" md-cols-gt-md="4"
            md-row-height-gt-md="1:1" md-row-height="1:1"
            md-gutter="12px" md-gutter-gt-sm="8px" >
        <md-grid-tile
            ng-repeat="(key, value) in iconSet"
            class="filter-item">
          <a ng-click="activityClicked(key)" href="#" ng-class="{'activity-filtered':(isFiltered(key))}"><img src="/images/{{value}}" class="filter-icon"></a>
 <!--
          <md-grid-tile-footer>
            <h5>ActivityID: {{key}}</h5>
          </md-grid-tile-footer>
  -->
        </md-grid-tile>
      </md-grid-list>
    </md-content>

  </div>

  <div flex="67" layout layout-wrap>
    <div ng-show="(search.state && !search.recAreaID && !search.query)" layout="column" layout-padding layout-margin layout-fill>
      <h3>
        Recreational Areas in <strong>{{ search.state }}</strong>: {{ recareas.length }}
        <div id="loader" ng-if="$root.loading">
           <strong>LOADING...</strong>
        </div>
      </h3>
      <div layout="column" layout-padding class="result-list">
        <md-whiteframe ng-repeat="recarea in recareas" class="md-whiteframe-z2" layout layout-align="center center">
          <div flex layout="column">
            <h3>{{recarea.RecAreaName}} ({{recarea.FACILITY.length}})</h3>
            <div layout="column" class="search-result">
              <div ng-bind-html="recarea.RecAreaDescription | shortDesc"></div>
              <section layout="row" layout-align="center center" layout-wrap>
                <span ng-repeat="activity in recarea.ACTIVITY">
                  <div layout="row" layout-align="center center" class="activity-item">
                    <img src="/images/acticon-{{activity.ActivityID}}.png" aria-label="{{activity.ActivityName}}" class="activity-icon" onError="this.onerror=null;this.src='/images/icon_blank.png';" />
                    <span class="activity-label">{{activity.ActivityName | char20}}</span>
                  </div>
                </span>
              </section>
            </div>
          </div>
        </md-whiteframe>
      </div>
    </div>

    <div ng-show="search.recAreaID || search.query" layout="column" layout-padding layout-margin layout-fill>
      <h3>
        Facilities in <strong>{{ search.recAreaID }}</strong>: {{ facilities.length }}
        <div id="loader" ng-if="$root.loading">
           <strong>LOADING...</strong>
        </div>
      </h3>
      <div layout="column" layout-padding class="result-list">
        <md-whiteframe ng-repeat="facility in facilities" class="md-whiteframe-z4" layout layout-align="center center">
          <div flex layout="column">
            <h3>{{facility.FacilityName}}: id: {{facility.FacilityID}}</h3>
            <div layout="column" class="search-result">
              <div ng-bind-html="facility.FacilityDescription | shortDesc"></div>
              <section layout="row" layout-align="center center" layout-wrap>
                <span ng-repeat="activity in facility.ACTIVITY">
                  <div layout="column">
                    <img src="/images/acticon-{{activity.ActivityID}}.png" aria-label="{{activity.ActivityName}}" class="activity-icon" onError="this.onerror=null;this.src='/images/icon_blank.png';" />
                    <div class="activity-label">{{activity.ActivityName | char20}}</div>
                  </div>
                </span>
              </section>
            </div>
          </div>
        </md-whiteframe>
      </div>
      </div>
  </div>
</div>

